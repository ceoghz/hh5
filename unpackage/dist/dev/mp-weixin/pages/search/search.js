(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/search/search"],{231:
/*!*******************************************************************************************************************!*\
  !*** C:/Users/love/Desktop/h52/pages/search/search.vue?vue&type=style&index=0&id=4cedc0c6&lang=less&scoped=true& ***!
  \*******************************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var o=n(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-2!./node_modules/postcss-loader/src??ref--10-oneOf-1-3!./node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=style&index=0&id=4cedc0c6&lang=less&scoped=true& */232),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},232:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-2!./node_modules/postcss-loader/src??ref--10-oneOf-1-3!./node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/love/Desktop/h52/pages/search/search.vue?vue&type=style&index=0&id=4cedc0c6&lang=less&scoped=true& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){},69:
/*!****************************************************************************!*\
  !*** C:/Users/love/Desktop/h52/main.js?{"page":"pages%2Fsearch%2Fsearch"} ***!
  \****************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){n(/*! uni-pages */4);o(n(/*! vue */2));var e=o(n(/*! ./pages/search/search.vue */70));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},70:
/*!*********************************************************!*\
  !*** C:/Users/love/Desktop/h52/pages/search/search.vue ***!
  \*********************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var o=n(/*! ./search.vue?vue&type=template&id=4cedc0c6&scoped=true& */71),a=n(/*! ./search.vue?vue&type=script&lang=js& */73);for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n(/*! ./search.vue?vue&type=style&index=0&id=4cedc0c6&lang=less&scoped=true& */231);var c,r=n(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */12),s=Object(r["default"])(a["default"],o["render"],o["staticRenderFns"],!1,null,"4cedc0c6",null,!1,o["components"],c);s.options.__file="pages/search/search.vue",e["default"]=s.exports},71:
/*!****************************************************************************************************!*\
  !*** C:/Users/love/Desktop/h52/pages/search/search.vue?vue&type=template&id=4cedc0c6&scoped=true& ***!
  \****************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";n.r(e);var o=n(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=template&id=4cedc0c6&scoped=true& */72);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},72:
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/love/Desktop/h52/pages/search/search.vue?vue&type=template&id=4cedc0c6&scoped=true& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";n.r(e),n.d(e,"render",(function(){return a})),n.d(e,"staticRenderFns",(function(){return c})),n.d(e,"recyclableRender",(function(){return i})),n.d(e,"components",(function(){return o}));var o={uniPopup:function(){return Promise.all(/*! import() | components/uni-popup/uni-popup */[n.e("common/vendor"),n.e("components/uni-popup/uni-popup")]).then(n.bind(null,/*! @/components/uni-popup/uni-popup.vue */527))}},a=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){return t.uni.navigateBack({delta:1})})},i=!1,c=[];a._withStripped=!0},73:
/*!**********************************************************************************!*\
  !*** C:/Users/love/Desktop/h52/pages/search/search.vue?vue&type=script&lang=js& ***!
  \**********************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var o=n(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js& */74),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},74:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/love/Desktop/h52/pages/search/search.vue?vue&type=script&lang=js& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(/*! ./node_modules/@babel/runtime/regenerator */21)),a=i(n(/*! @/utils/crypto-js/crypto-js.js */75));function i(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,o,a,i,c){try{var r=t[i](c),s=r.value}catch(u){return void n(u)}r.done?e(s):Promise.resolve(s).then(o,a)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){c(i,o,a,r,s,"next",t)}function s(t){c(i,o,a,r,s,"throw",t)}r(void 0)}))}}var s=function(){n.e(/*! require.ensure | components/head */"components/head").then(function(){return resolve(n(/*! @/components/head.vue */536))}.bind(null,n)).catch(n.oe)},u={data:function(){return{nav_height:"",search_inp:"",is_can:!1,histrayArr:[],type:"center",page:1,productArr:[],APPID:"5fbf4040",API_SECRET:"868b5d7705092ecc855399c5c478398b",API_KEY:"3c8e91bf904901f722be7bc08b112c8f",webSocket:"",audioData:[],status:"null",language:"zh_cn",accent:"mandarin",resultText:"",resultTextTemp:""}},components:{Head:s},methods:{abb:function(){console.log("TransWorker",TransWorker)},getWebSocketUrl:function(){var t=this;return new Promise((function(e,n){var o="wss://iat-api.xfyun.cn/v2/iat",i="iat-api.xfyun.cn",c=t.API_KEY,r=t.API_SECRET,s=(new Date).toGMTString(),u="hmac-sha256",d="host date request-line",l="host: ".concat(i,"\ndate: ").concat(s,"\nGET /v2/iat HTTP/1.1"),h=a.default.HmacSHA256(l,r),f=a.default.enc.Base64.stringify(h),p='api_key="'.concat(c,'", algorithm="').concat(u,'", headers="').concat(d,'", signature="').concat(f,'"'),g=btoa(p);o="".concat(o,"?authorization=").concat(g,"&date=").concat(s,"&host=").concat(i),e(o)}))},toBase64:function(t){for(var e="",n=new Uint8Array(t),o=n.byteLength,a=0;a<o;a++)e+=String.fromCharCode(n[a]);return window.btoa(e)},connectWebSocket:function(){var t=this;console.log(66),this.getWebSocketUrl().then((function(e){var n;if("WebSocket"in window)n=new WebSocket(e);else{if(!("MozWebSocket"in window))return void alert("浏览器不支持WebSocket");n=new MozWebSocket(e)}t.webSocket=n,n.onopen=function(e){console.log(e),console.log(1),setTimeout((function(){t.webSocketSend()}),500)},n.onmessage=function(t){console.log(2)},n.onerror=function(t){console.log(3)},n.onclose=function(t){console.log(4)},console.log("iatWS",n)}))},webSocketSend:function(){var t=this;if(1===this.webSocket.readyState){var e=this.audioData.splice(0,1280);console.log(e),console.log(this.APPID);var n={common:{app_id:this.APPID},business:{language:this.language,domain:"iat",accent:this.accent,vad_eos:5e3,dwa:"wpgs"},data:{status:0,format:"audio/L16;rate=16000",encoding:"raw",audio:this.toBase64(e)}};this.webSocket.send(JSON.stringify(n)),this.handlerInterval=setInterval((function(){return 1!==t.webSocket.readyState?(t.audioData=[],void clearInterval(t.handlerInterval)):0===t.audioData.length?("end"===t.status&&(t.webSocket.send(JSON.stringify({data:{status:2,format:"audio/L16;rate=16000",encoding:"raw",audio:""}})),t.audioData=[],clearInterval(t.handlerInterval)),!1):(e=t.audioData.splice(0,1280),void t.webSocket.send(JSON.stringify({data:{status:1,format:"audio/L16;rate=16000",encoding:"raw",audio:t.toBase64(e)}})))}),40)}},recorderInit:function(){var t=this;console.log(11),this.abb(),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;try{if(console.log(22),this.audioContext=new(window.AudioContext||window.webkitAudioContext),console.log(this.audioContext),console.log(this.audioContext.resume()),this.audioContext.resume(),!this.audioContext)return void alert("浏览器不支持webAudioApi相关接口")}catch(o){if(!this.audioContext)return void alert("浏览器不支持webAudioApi相关接口")}if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(t){e(t)})).catch((function(t){n(t)}));else{if(!navigator.getUserMedia)return navigator.userAgent.toLowerCase().match(/chrome/)&&location.origin.indexOf("https://")<0?alert("chrome下获取浏览器录音功能，因为安全性问题，需要在localhost或127.0.0.1或https下才能获取权限"):alert("无法获取浏览器录音功能，请升级浏览器或使用chrome"),void(this.audioContext&&this.audioContext.close());navigator.getUserMedia({audio:!0,video:!1},(function(t){e(t)}),(function(t){n(t)}))}var e=function(e){console.log("getMediaSuccess"),t.scriptProcessor=t.audioContext.createScriptProcessor(0,1,1),t.scriptProcessor.onaudioprocess=function(e){t.status},t.mediaSource=t.audioContext.createMediaStreamSource(e),t.mediaSource.connect(t.scriptProcessor),t.scriptProcessor.connect(t.audioContext.destination),t.connectWebSocket()},n=function(e){alert("请求麦克风失败"),console.log(e),t.audioContext&&t.audioContext.close(),t.audioContext=void 0,t.webSocket&&1===t.webSocket.readyState&&t.webSocket.close()}},inputClick:function(t){""!==t.detail.value?this.is_can=!0:this.is_can=!1},clearClick:function(){this.search_inp="",this.is_can=!1},togglePopup:function(){var t=this;this.$nextTick((function(){t.$refs.showtip.open()}))},btnClick:function(t){this.search_inp=t,this.page=1,this.is_can=!0,this.searchProduct()},jumpGoodsDetail:function(e){t.navigateTo({url:"/pages/goods/goodsDetail?id=".concat(e)})},cancel:function(t){this.$refs.showtip.close()},confirm:function(){var t=this;return r(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.cancelHistory(),t.$refs.showtip.close();case 2:case"end":return e.stop()}}),e)})))()},searchProduct:function(){var e=this;this.$http.post("",{access_id:t.getStorageSync("access_id"),store_id:1,store_type:2,module:"app",action:"search",app:"product_search",keyword:this.search_inp,page:this.page}).then((function(n){console.log(n),200==n.data.code?(e.productArr=n.data.data.data,0==e.productArr.length&&t.showToast({title:"没有此商品",icon:"none"})):t.showToast({title:n.data.message,icon:"none"})}))},historysearch:function(){var e=this;this.$http.post("",{access_id:t.getStorageSync("access_id"),store_id:1,store_type:2,module:"app",action:"search",app:"search_history"}).then((function(t){console.log(t),200==t.data.code&&(e.histrayArr=t.data.data)}))},cancelHistory:function(){var e=this;this.$http.post("",{access_id:t.getStorageSync("access_id"),store_id:1,store_type:2,module:"app",action:"search",app:"del_history"}).then((function(t){console.log(t),200==t.data.code&&(e.histrayArr=t.data.data)}))}},onLoad:function(){this.historysearch(),this.nav_height=t.getStorageSync("nav_height")}};e.default=u}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])}},[[69,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/search/search.js.map